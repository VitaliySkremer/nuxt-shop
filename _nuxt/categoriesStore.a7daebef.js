import{r as C,n as E,ar as N,q as T,l as V,a3 as g,w as q,N as R,b as P,O as F,a1 as O,D as _,j as S,S as A,W as j,as as z,U as H,at as M,ai as D,k as K}from"./entry.428a5e80.js";import{a8 as G,I as y,i as Q,F as p,H as w}from"./button.3432f37f.js";function U(t){let e;const o=C(!1),s=E({...t,originalPosition:"",originalOverflow:"",visible:!1});function r(a){s.text=a}function n(){const a=s.parent,i=d.ns;if(!a.vLoadingAddClassList){let c=a.getAttribute("loading-number");c=Number.parseInt(c)-1,c?a.setAttribute("loading-number",c.toString()):(y(a,i.bm("parent","relative")),a.removeAttribute("loading-number")),y(a,i.bm("parent","hidden"))}l(),m.unmount()}function l(){var a,i;(i=(a=d.$el)==null?void 0:a.parentNode)==null||i.removeChild(d.$el)}function u(){var a;t.beforeClose&&!t.beforeClose()||(o.value=!0,clearTimeout(e),e=window.setTimeout(f,400),s.visible=!1,(a=t.closed)==null||a.call(t))}function f(){if(!o.value)return;const a=s.parent;o.value=!1,a.vLoadingAddClassList=void 0,n()}const m=N(V({name:"ElLoading",setup(a,{expose:i}){const{ns:c,zIndex:I}=G("loading");return i({ns:c,zIndex:I}),()=>{const h=s.spinner||s.svg,$=g("svg",{class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"0 0 50 50",...h?{innerHTML:h}:{}},[g("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),B=s.text?g("p",{class:c.b("text")},[s.text]):void 0;return g(O,{name:c.b("fade"),onAfterLeave:f},{default:q(()=>[R(P("div",{style:{backgroundColor:s.background||""},class:[c.b("mask"),s.customClass,s.fullscreen?"is-fullscreen":""]},[g("div",{class:c.b("spinner")},[$,B])]),[[F,s.visible]])])})}}})),d=m.mount(document.createElement("div"));return{...T(s),setText:r,removeElLoadingChild:l,close:u,handleAfterLeave:f,vm:d,get $el(){return d.$el}}}let b;const W=function(t={}){if(!Q)return;const e=Y(t);if(e.fullscreen&&b)return b;const o=U({...e,closed:()=>{var r;(r=e.closed)==null||r.call(e),e.fullscreen&&(b=void 0)}});Z(e,e.parent,o),k(e,e.parent,o),e.parent.vLoadingAddClassList=()=>k(e,e.parent,o);let s=e.parent.getAttribute("loading-number");return s?s=`${Number.parseInt(s)+1}`:s="1",e.parent.setAttribute("loading-number",s),e.parent.appendChild(o.$el),_(()=>o.visible.value=e.visible),e.fullscreen&&(b=o),o},Y=t=>{var e,o,s,r;let n;return S(t.target)?n=(e=document.querySelector(t.target))!=null?e:document.body:n=t.target||document.body,{parent:n===document.body||t.body?document.body:n,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:n===document.body&&((o=t.fullscreen)!=null?o:!0),lock:(s=t.lock)!=null?s:!1,customClass:t.customClass||"",visible:(r=t.visible)!=null?r:!0,target:n}},Z=async(t,e,o)=>{const{nextZIndex:s}=o.vm.zIndex||o.vm._.exposed.zIndex,r={};if(t.fullscreen)o.originalPosition.value=p(document.body,"position"),o.originalOverflow.value=p(document.body,"overflow"),r.zIndex=s();else if(t.parent===document.body){o.originalPosition.value=p(document.body,"position"),await _();for(const n of["top","left"]){const l=n==="top"?"scrollTop":"scrollLeft";r[n]=`${t.target.getBoundingClientRect()[n]+document.body[l]+document.documentElement[l]-Number.parseInt(p(document.body,`margin-${n}`),10)}px`}for(const n of["height","width"])r[n]=`${t.target.getBoundingClientRect()[n]}px`}else o.originalPosition.value=p(e,"position");for(const[n,l]of Object.entries(r))o.$el.style[n]=l},k=(t,e,o)=>{const s=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?y(e,s.bm("parent","relative")):w(e,s.bm("parent","relative")),t.fullscreen&&t.lock?w(e,s.bm("parent","hidden")):y(e,s.bm("parent","hidden"))},x=Symbol("ElLoading"),L=(t,e)=>{var o,s,r,n;const l=e.instance,u=a=>A(e.value)?e.value[a]:void 0,f=a=>{const i=S(a)&&(l==null?void 0:l[a])||a;return i&&C(i)},v=a=>f(u(a)||t.getAttribute(`element-loading-${z(a)}`)),m=(o=u("fullscreen"))!=null?o:e.modifiers.fullscreen,d={text:v("text"),svg:v("svg"),svgViewBox:v("svgViewBox"),spinner:v("spinner"),background:v("background"),customClass:v("customClass"),fullscreen:m,target:(s=u("target"))!=null?s:m?void 0:t,body:(r=u("body"))!=null?r:e.modifiers.body,lock:(n=u("lock"))!=null?n:e.modifiers.lock};t[x]={options:d,instance:W(d)}},J=(t,e)=>{for(const o of Object.keys(e))j(e[o])&&(e[o].value=t[o])},se={mounted(t,e){e.value&&L(t,e)},updated(t,e){const o=t[x];e.oldValue!==e.value&&(e.value&&!e.oldValue?L(t,e):e.value&&e.oldValue?A(e.value)&&J(e.value,o.options):o==null||o.instance.close())},unmounted(t){var e;(e=t[x])==null||e.instance.close()}};const X=(t,e)=>{const o=H();return M(t,{...e,async onRequest({request:s,options:r}){const n=new Headers(r.headers);n.set("Authorization",`"Bearer ${o.getToken}"`),r.headers=n},async onRequestError({request:s,options:r,error:n}){},async onResponse({request:s,response:r,options:n}){},async onResponseError({request:s,response:r,options:n}){}},"$s6QrlNsyKo")},oe=D("categories",()=>{const t=C(new Map);return{getCategories:K(()=>t.value),getCategoriesFetch:async()=>{var s;try{const{data:r}=await X("https://dummyjson.com/products/categories");t.value=new Map((s=r.value)==null?void 0:s.map((n,l)=>[(l+1).toString(),n]))}catch(r){throw new Error(r)}}}});export{X as a,oe as u,se as v};
